# 17 February, 2016

## Vue

### Component Composite

在Vue里，组件的组合需要考虑`scope`的问题。看下面的代码：

```html
<div id="app">
    <child :msg='message' @click="changeParentProps"></child>
</div>
```

```js
// child component
let Child = Vue.component('child', {
    props: ['msg'],
    template: '<span>Hi there! {{ msg }}</span>',
    methods: {
        changeParentProps() {
            this.msg = 'hahaha';
        }
    }
});

// parent component
new Vue({
    el: '#app',
    data: {
        message: 'Hello World!'
    }
});
```

这里会报错，说在parent中找不到属性。为什么呢？因为我们在`<child>`里绑定的`@click="changeParentProps"`的属性是在child的scope中的，而`html`里的声明方式，其实是用的parent的`scope`。正确的姿势是这样的：

```js
let Child = Vue.component('child', {
    props: ['msg'],
    // 把绑定放到child内部
    template: '<span @click="changeParentProps">Hi there! {{ msg }}</span>',
    methods: {
        changeParentProps() {
            this.msg = 'hahaha';
        }
    }
});
```

### is attribute

`is`是component上的一个属性，用来标识当前`<component>`使用哪个component类

```js
new Vue({
  el: 'body',
  data: {
    currentView: 'home'
  },
  components: {
    home: { /* ... */ },
    posts: { /* ... */ },
    archive: { /* ... */ }
  }
})
```

```html
<component :is="currentView">
  <!-- component changes when vm.currentview changes! -->
</component>
```

这样就可以动态替换component了，我想`vue-router`也是基于这个实现的吧


